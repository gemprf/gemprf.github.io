<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support & Contact - GEM-pRF | Help, Setup, Feedback</title>

    <!-- Basic -->
    <meta name="description" content="Contact GEM-pRF support for questions, setup help, troubleshooting, and feedback. We respond promptly to keep your pRF mapping running smoothly.">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:title" content="GEM-pRF Support & Contact">
    <meta property="og:description" content="Get help with GEM-pRF: installation, setup, troubleshooting, and feedback. Reach the team directly.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gemprf.github.io/support.html">
    <meta property="og:image" content="https://gemprf.github.io/assets/images/icons/gemprf-og-1200x628.jpg">
    <meta property="og:image:alt" content="GEM-pRF Support">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="GEM-pRF Support & Contact">
    <meta name="twitter:description" content="Questions or setup help? Contact the GEM-pRF team.">
    <meta name="twitter:image" content="https://gemprf.github.io/assets/images/icons/gemprf-og-1200x628.jpg">
    <meta name="twitter:image:alt" content="GEM-pRF Support">

    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="canonical" href="https://gemprf.github.io/support.html">
    <link rel="stylesheet" href="/css/style.css">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MXYNQ1GY8V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-MXYNQ1GY8V');
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ContactPage",
      "name": "GEM-pRF Support",
      "url": "https://gemprf.github.io/support.html",
      "description": "Support and contact for GEM-pRF installation, setup, troubleshooting, and feedback.",
      "mainEntityOfPage": "https://gemprf.github.io/support.html",
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer support",
        "url": "https://gemprf.github.io/support.html",
        "availableLanguage": ["en"]
      }
    }
    </script>
</head>

<body>
  <div class="container">
    <nav class="sidebar">
      <h2>
        GEM-pRF
      </h2>            
      <div id="sidebar-placeholder"></div>
    </nav>

    <main class="content">
      <h1>Support</h1>

      <!-- Support Info Box -->
      <div class="welcome-box">
        <p>
          Donâ€™t hesitate to reach out. Whether you have a question, need setup support, or just want to share feedback, we read every note and will get back to you promptly.
        </p>
      </div>

      <!-- Contact Form -->
      <div class="form-container">
        <form id="support-form" action="https://formspree.io/f/mdaeklej" method="POST" class="support-form">
          
          <!-- Name Field -->
          <div class="form-group">
            <label for="name">Name <span class="required">*</span></label>
            <input 
              type="text" 
              id="name" 
              name="name" 
              required 
              placeholder="Your full name"
              class="form-input"
            >
          </div>

          <!-- Email Field -->
          <div class="form-group">
            <label for="email">Email <span class="required">*</span></label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              required 
              placeholder="your.email@example.com"
              class="form-input"
            >
          </div>

          <!-- Subject Field -->
          <div class="form-group">
            <label for="subject">Subject <span class="required">*</span></label>
            <input 
              type="text" 
              id="subject" 
              name="subject" 
              required 
              placeholder="Brief subject of your query"
              class="form-input"
            >
          </div>

          <!-- Message Field -->
          <div class="form-group">
            <label for="message">Message <span class="required">*</span></label>
            <textarea 
              id="message" 
              name="message" 
              required 
              placeholder="Please describe your issue or question in detail..."
              rows="6"
              class="form-input"
            ></textarea>
          </div>

          <!-- GDPR Consent Checkbox -->
          <div class="form-group checkbox-group">
            <label for="consent" class="checkbox-label">
              <input 
                type="checkbox" 
                id="consent" 
                name="consent" 
                required
                class="checkbox-input"
              >
              <span>I consent to GEM-pRF processing my data to respond to my support request. <span class="required">*</span></span>
            </label>
          </div>

          <!-- Privacy Notice -->
          <div class="privacy-notice">
            <p><strong>Data Processing Notice:</strong></p>
            <p>Your name, email, subject, and message will be used solely to respond to your support request. Your data is submitted to <a href="https://formspree.io/" target="_blank" rel="noopener noreferrer">Formspree</a> and will be retained for up to 90 days unless you request deletion. You have the right to access, correct, or delete your personal data at any time. <button type="button" id="privacy-info-btn" class="privacy-link-btn">View our Privacy Policy</button></p>
          </div>

          <!-- Submit Button -->
          <div class="form-group">
            <button type="submit" class="submit-button">Send Support Request</button>
          </div>

          <!-- Status Messages -->
          <div id="form-status" class="form-status"></div>

        </form>
      </div>

      <!-- Additional Help -->
      <div class="paper-box">
        <p><strong>Before contacting support, please check:</strong></p>
        <ul style="margin-top: 10px; padding-left: 20px;">
          <li>The <a href="/installation.html">Installation Guide</a> for setup issues</li>
          <li>The <a href="/running.html">Running GEM-pRF</a> page for execution questions</li>
          <li>The <a href="/configuration.html">Configuration</a> page for config-related issues</li>
          <li>Our <a href="/tutorials.html">Tutorials</a> for usage examples</li>
        </ul>
      </div>

      <!-- Privacy Modal -->
      <div id="privacy-modal" class="modal">
        <div class="modal-content">
          <span class="modal-close" id="privacy-modal-close">&times;</span>
          <h2>Privacy & Data Protection</h2>
          <p><strong>Data Controller:</strong> GEM-pRF Development Team (contact: <span id="encoded-email" data-email="c2lkZGhhcnRoLm1pdHRhbEBtdXYuYWMuYXQ="></span>)</p>
          
          <p><strong>What data we collect:</strong> Your name, email address, subject, and message from the support form.</p>
          
          <p><strong>Why we collect it:</strong> To understand your inquiry and provide technical support and assistance.</p>
          
          <p><strong>Legal basis:</strong> Your explicit consent as provided through the form's consent checkbox.</p>
          
          <p><strong>Data retention:</strong> Your data is retained for up to 90 days to allow time for follow-up communication. You may request deletion of your data at any time.</p>
          
          <p><strong>Who has access:</strong> Only authorized members of the GEM-pRF support team access your data.</p>
          
          <p><strong>Your rights:</strong> You have the right to access, correct, delete, or port your personal data. To exercise these rights, please email us directly.</p>
          
          <p><strong>Third-party services:</strong> Your form data is processed through <a href="https://formspree.io/legal/privacy-policy/" target="_blank" rel="noopener noreferrer">Formspree</a>, which adheres to GDPR standards. By submitting this form, you consent to this transfer.</p>
          
          <p style="margin-top: 25px; padding-top: 15px; border-top: 1px solid #ddd;">
            <strong>For our complete Privacy Policy, please visit our <a href="/privacy.html" target="_blank">full Privacy Policy page</a>.</strong>
          </p>
        </div>
      </div>

    </main>
  </div>

  <style>
    .form-container {
      background: #f9f9f9;
      border-left: 4px solid #0077b5;
      padding: 25px;
      margin: 20px 0;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .support-form {
      max-width: 600px;
      margin: 0 auto;
    }

    .form-group {
      margin-bottom: 20px;
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
    }

    .required {
      color: #d32f2f;
    }

    .form-input {
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
      font-family: inherit;
      transition: border-color 0.3s ease;
    }

    .form-input:focus {
      outline: none;
      border-color: #0077b5;
      box-shadow: 0 0 5px rgba(0, 119, 181, 0.2);
    }

    textarea.form-input {
      resize: vertical;
      min-height: 150px;
    }

    .submit-button {
      background-color: #0077b5;
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
    }

    .submit-button:hover {
      background-color: #005a8b;
    }

    .submit-button:active {
      transform: scale(0.98);
    }

    .form-status {
      margin-top: 15px;
      padding: 12px;
      border-radius: 4px;
      text-align: center;
      display: none;
    }

    .form-status.success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      display: block;
    }

    .form-status.error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
      display: block;
    }

    .form-status.loading {
      background-color: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
      display: block;
    }

    .checkbox-group {
      margin-bottom: 20px;
      margin-top: 15px;
    }

    .checkbox-label {
      display: flex;
      align-items: flex-start;
      font-weight: 400;
      color: #333;
      cursor: pointer;
      gap: 10px;
    }

    .checkbox-input {
      margin-top: 4px;
      cursor: pointer;
      width: 18px;
      height: 18px;
      min-width: 18px;
    }

    .privacy-notice {
      background-color: #e3f2fd;
      border-left: 4px solid #0077b5;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
      font-size: 0.95rem;
      color: #1565c0;
    }

    .privacy-notice p {
      margin: 8px 0;
      line-height: 1.5;
    }

    .privacy-notice a {
      color: #0077b5;
      text-decoration: underline;
    }

    .privacy-notice a:hover {
      color: #005a8b;
    }

    .privacy-link-btn {
      background: none;
      border: none;
      color: #0077b5;
      text-decoration: underline;
      cursor: pointer;
      padding: 0;
      font-size: 0.95rem;
      font-family: inherit;
      margin-left: 4px;
    }

    .privacy-link-btn:hover {
      color: #005a8b;
      text-decoration: none;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      position: relative;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-close {
      position: absolute;
      right: 20px;
      top: 15px;
      font-size: 32px;
      font-weight: bold;
      color: #aaa;
      cursor: pointer;
      line-height: 1;
    }

    .modal-close:hover,
    .modal-close:focus {
      color: #000;
    }

    .modal-content h2 {
      margin-top: 0;
      margin-bottom: 20px;
      color: #333;
    }

    .modal-content p {
      margin: 12px 0;
      line-height: 1.6;
      color: #555;
    }

    .modal-content a {
      color: #0077b5;
      text-decoration: underline;
    }

    .modal-content a:hover {
      color: #005a8b;
    }

    @media (max-width: 600px) {
      .modal-content {
        margin: 20px;
        max-width: calc(100% - 40px);
      }
    }
  </style>

  <!-- Fetch the sidebar items -->
  <script src="/js/sidebar.js"></script>

  <!-- Email decoding script -->
  <script>
    function decodeEmails() {
      // Decode all encoded email elements
      const encodedElements = document.querySelectorAll('[data-email]');
      encodedElements.forEach(element => {
        const encoded = element.getAttribute('data-email');
        const decoded = atob(encoded);
        
        if (element.id === 'encoded-email') {
          // For the modal, just show the email text
          element.textContent = decoded;
        } else if (element.tagName === 'A') {
          // For mailto links
          element.href = 'mailto:' + decoded;
          element.textContent = decoded;
        }
      });
    }
    
    // Decode on page load
    document.addEventListener('DOMContentLoaded', decodeEmails);
  </script>

  <!-- Form handling script -->
  <script>
    // Privacy modal handling
    const privacyModal = document.getElementById('privacy-modal');
    const privacyBtn = document.getElementById('privacy-info-btn');
    const privacyCloseBtn = document.getElementById('privacy-modal-close');

    privacyBtn.addEventListener('click', function() {
      privacyModal.classList.add('show');
    });

    privacyCloseBtn.addEventListener('click', function() {
      privacyModal.classList.remove('show');
    });

    // Close modal when clicking outside of it
    privacyModal.addEventListener('click', function(event) {
      if (event.target === privacyModal) {
        privacyModal.classList.remove('show');
      }
    });

    // Close modal on Escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape' && privacyModal.classList.contains('show')) {
        privacyModal.classList.remove('show');
      }
    });

    document.getElementById('support-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const form = this;
      const statusDiv = document.getElementById('form-status');
      const submitBtn = form.querySelector('.submit-button');
      const consentCheckbox = document.getElementById('consent');

      // Check if consent is given
      if (!consentCheckbox.checked) {
        statusDiv.className = 'form-status error';
        statusDiv.textContent = 'Please consent to data processing before submitting the form.';
        return;
      }
      
      // Show loading state
      statusDiv.className = 'form-status loading';
      statusDiv.textContent = 'Sending your request...';
      submitBtn.disabled = true;

      try {
        const formData = new FormData(form);
        const response = await fetch(form.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });

        if (response.ok) {
          statusDiv.className = 'form-status success';
          statusDiv.textContent = 'Thank you! Your support request has been sent successfully. We\'ll get back to you soon.';
          form.reset();
          submitBtn.disabled = false;
        } else {
          throw new Error('Form submission failed');
        }
      } catch (error) {
        statusDiv.className = 'form-status error';
        statusDiv.textContent = 'There was an error sending your request. Please try again or email us directly.';
        submitBtn.disabled = false;
      }
    });
  </script>

</body>

</html>
